version: "3.8"

services:
  duplicati:
    image: duplicati/duplicati:2.1.0.125
    container_name: duplicati
    network_mode: bridge
    ports:
      - "8200:8200"
    environment:
      - PUID=99
      - PGID=100
      - UMASK=022
      - TZ=Europe/Amsterdam
      - SETTINGS_ENCRYPTION_KEY=$SETTINGS_ENCRYPTION_KEY
      - DUPLICATI_WEBSERVICE_PASSWORD=$DUPLICATI_WEBSERVICE_PASSWORD
    volumes:
      - /mnt/user/backups:/backups
      - /mnt/user:/source
      - /mnt/cache_pool/appdata/duplicati:/config
    restart: unless-stopped
    labels:
      - "net.unraid.docker.icon=https://raw.githubusercontent.com/linuxserver/docker-templates/master/linuxserver.io/img/duplicati-logo.png"
