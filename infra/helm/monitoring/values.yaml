crds:
  enabled: true

nameOverride: "monitoring"
cleanPrometheusOperatorObjectNames: true

alertmanager:
  alertmanagerSpec:
    config:
      global:
        resolve_timeout: 5m
      route:
        group_wait: 30s
        group_interval: 5m
        repeat_interval: 1h
        receiver: 'ntfy-receiver'
        routes:
          - match:
              alertname: Watchdog
            receiver: 'ntfy-receiver'
          - match_re:
              alertname: .*
            receiver: 'ntfy-receiver'
      receivers:
        - name: 'ntfy-receiver'
          webhook_configs:
            - url: 'https://ntfy.atoca.house/rpi-k8s'
              send_resolved: true
    storage:
      volumeClaimTemplate:
        spec:
          storageClassName: openebs-hostpath 
          accessModes: ["ReadWriteOnce"]
          resources:
            requests:
              storage: 10Gi
  ingress:
    enabled: true
    ingressClassName: nginx
    annotations:
      gethomepage.dev/enabled: "true"
      gethomepage.dev/name: "Alertmanager"
      gethomepage.dev/description: "Alertmanager"
      gethomepage.dev/group: "Dynamic"
      gethomepage.dev/icon: "alertmanager.png"
      cert-manager.io/cluster-issuer: "cloudflare-prod"
    hosts:
      - alertmanager.atoca.house
    tls:
      - secretName: alertmanager-tls
        hosts:
          - alertmanager.atoca.house

prometheus:
  prometheusSpec:
    serviceMonitorSelector:
      matchLabels: {}
    serviceMonitorNamespaceSelector:
      matchLabels: {}
    additionalScrapeConfigs:
      - job_name: 'compartilhado-node-exporter'
        scrape_interval: 30s
        static_configs:
          - targets:
            - '192.168.178.160:9100'  # Node Exporter running on NAS
      - job_name: 'hass-node-exporter'
        scrape_interval: 30s
        static_configs:
          - targets:
            - '192.168.178.22:9100'  # Node Exporter running on Home Assistant
    storageSpec:
      volumeClaimTemplate:
        spec:
          storageClassName: openebs-hostpath 
          accessModes: ["ReadWriteOnce"]
          resources:
            requests:
              storage: 20Gi
    # Retention period
    retention: 3d
    retentionSize: "20GB"
  ingress:
    enabled: true
    ingressClassName: nginx
    annotations:
      gethomepage.dev/enabled: "true"
      gethomepage.dev/name: "Prometheus"
      gethomepage.dev/description: "Prometheus"
      gethomepage.dev/group: "Dynamic"
      gethomepage.dev/icon: "prometheus.svg"
      cert-manager.io/cluster-issuer: "cloudflare-prod"
    hosts:
      - prometheus.atoca.house
    tls:
      - secretName: prometheus-tls
        hosts:
          - prometheus.atoca.house

kubeStateMetrics:
  nameOverride: kube-state-metrics

prometheus-node-exporter:
  fullnameOverride: node-exporter
  prometheus:
    monitor:
      enabled: true
  rbac:
    pspEnabled: true

grafana:
  enabled: false
  forceDeployDashboards: true
