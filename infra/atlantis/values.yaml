atlantisUrl: https://atlantis.atoca.house

orgAllowlist: github.com/guilhermewolf/atoca.house


environment:
  ATLANTIS_WRITE_GIT_CREDS: "true"
  ATLANTIS_REPO_ALLOWLIST: "github.com/guilhermewolf/atoca.house"
  ATLANTIS_WEB_BASIC_AUTH: true
  
environmentSecrets:
  - name: ATLANTIS_GH_APP_ID
    secretKeyRef:
      name: atlantis-gh-app
      key: gh-app-id

  - name: ATLANTIS_GH_APP_KEY
    secretKeyRef:
      name: atlantis-gh-app
      key: gh-app-key-file

  - name: ATLANTIS_GH_WEBHOOK_SECRET
    secretKeyRef:
      name: atlantis-gh-app
      key: gh-webhook-secret
      
  # - name: ATLANTIS_TFE_TOKEN
  #   secretKeyRef:
  #     name: atlantis-gh-app
  #     key: tf-cloud-team-token

  - name: ATLANTIS_WEB_USERNAME
    secretKeyRef:
      name: atlantis-web-auth
      key: username

  - name: ATLANTIS_WEB_PASSWORD
    secretKeyRef:
      name: atlantis-web-auth
      key: password

  - name: TF_VAR_cloudflare_api_token
    secretKeyRef:
      name: terraform-secrets
      key: cloudflare-token

  - name: TF_VAR_zone_id
    secretKeyRef:
      name: terraform-secrets
      key: cloudflare-zone-id

  - name: TF_VAR_account_id
    secretKeyRef:
      name: terraform-secrets
      key: cloudflare-account-id

  - name: TF_VAR_domain
    secretKeyRef:
      name: terraform-secrets
      key: cloudflare-domain

  - name: PG_CONN_STR
    secretKeyRef:
      name: terraform-secrets
      key: PG_CONN_STR

  - name: TF_VAR_npm_ip
    secretKeyRef:
      name: terraform-secrets
      key: npm_ip

## Use Server Side Repo Config,
## ref: https://www.runatlantis.io/docs/server-side-repo-config.html
## Example default configuration
repoConfig: |
 ---
 repos:
 - id: /.*/
   apply_requirements: []
   workflow: atoca-house
   allowed_overrides: []
   allow_custom_workflows: true
   allow_repo_config: true
 workflows:
   atoca-house:
     plan:
       steps: [init, plan]
     apply:
       steps: [apply]

enableDiffMarkdownFormat: true

commonLabels:
  app.kubernetes.io/name: atlantis
  app.kubernetes.io/instance: atlantis


ingress:
  enabled: false

volumeClaim:
  enabled: true
  dataStorage: 5Gi
  storageClassName: longhorn
