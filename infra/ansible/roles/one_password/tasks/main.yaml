---
# Retrieve secrets from 1Password and seal them with Sealed Secrets

- name: Retrieve 1Password secrets
  ansible.builtin.import_tasks: retrieve_secrets.yaml
  tags: [onepassword, retrieve]

- name: Create Kubernetes secrets
  ansible.builtin.import_tasks: create_secrets.yaml
  tags: [onepassword, create]

- name: Seal secrets with kubeseal
  ansible.builtin.import_tasks: seal_secrets.yaml
  tags: [onepassword, seal]

- name: Cleanup temporary files
  ansible.builtin.import_tasks: cleanup.yaml
  tags: [onepassword, cleanup]
